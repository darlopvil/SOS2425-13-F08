{
	"info": {
	  "_postman_id": "0edc088a-ad76-44ac-a773-576bd41b2c39",
	  "name": "blagaralo",
	  "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
	  "_exporter_id": "42334859",
	  "_collection_link": "https://sos2425-13.postman.co/workspace/b3461b93-8aac-4e5b-8b9e-3a008d3dd1ea/collection/42334859-0edc088a-ad76-44ac-a773-576bd41b2c39?action=share&source=collection_link&creator=42334859"
	},
	"item": [
	  {
		"name": "loadInitialData",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/loadInitialData",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "loadInitialData"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});",
				"pm.test(\"\u2714 Data was loaded\", function () {",
				"    pm.expect(pm.response.json().data.length).to.be.above(0);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "water-supply-improvements",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es uno de [201, 409, 404]\", function () {",
				"    pm.expect([201, 409, 404]).to.include(pm.response.code);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Dos parametros",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/cantabria",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "cantabria"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Por fecha",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2018",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2018"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es 200 o 404\", function () {",
				"    pm.expect([200, 404]).to.include(pm.response.code);",
				"});",
				"if (pm.response.code === 404) {",
				"    pm.test(\"\u2714 Devuelve mensaje de error\", function () {",
				"        pm.expect(pm.response.json()).to.have.property(\"error\");",
				"    });",
				"}"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Por comunidad",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Ayudas por claves",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements?autonomous_community=andalucia&year=2012",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			],
			"query": [
			  {
				"key": "autonomous_community",
				"value": "andalucia"
			  },
			  {
				"key": "year",
				"value": "2012"
			  }
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es 200 o 404\", function () {",
				"    pm.expect([200, 404]).to.include(pm.response.code);",
				"});",
				"if (pm.response.code === 404) {",
				"    pm.test(\"\u2714 Devuelve mensaje de error\", function () {",
				"        pm.expect(pm.response.json()).to.have.property(\"error\");",
				"    });",
				"}"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Ayudas por claves comunidad y fecha",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements?year=2012&autonomous_community=andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			],
			"query": [
			  {
				"key": "year",
				"value": "2012"
			  },
			  {
				"key": "autonomous_community",
				"value": "andalucia"
			  }
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es 200 o 404\", function () {",
				"    pm.expect([200, 404]).to.include(pm.response.code);",
				"});",
				"if (pm.response.code === 404) {",
				"    pm.test(\"\u2714 Devuelve mensaje de error\", function () {",
				"        pm.expect(pm.response.json()).to.have.property(\"error\");",
				"    });",
				"}"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Ayudas por comunidad y rango de fechas",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements?autonomous_community=andalucia&from=2009&to=2017",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			],
			"query": [
			  {
				"key": "autonomous_community",
				"value": "andalucia"
			  },
			  {
				"key": "from",
				"value": "2009"
			  },
			  {
				"key": "to",
				"value": "2017"
			  }
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 400: b\u00fasqueda por a\u00f1o primero",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/hola/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "hola",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error'\", function () {",
				"    pm.expect(pm.response.json()).to.have.property(\"error\");",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 404 :claves inexistentes",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "GET",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements?from=2025&to=2027",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			],
			"query": [
			  {
				"key": "autonomous_community",
				"value": "andalucia",
				"disabled": true
			  },
			  {
				"key": "from",
				"value": "2025"
			  },
			  {
				"key": "to",
				"value": "2027"
			  }
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error'\", function () {",
				"    pm.expect(pm.response.json()).to.have.property(\"error\");",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "water-supply-improvements",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "POST",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2012,\"autonomous_community\":\"andalucia\",\"amount\":5447744,\"benefited_population\":13599,\"project_count\":60}",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es uno de [201, 409, 404]\", function () {",
				"    pm.expect([201, 409, 404]).to.include(pm.response.code);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 400: Faltan campos",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "POST",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error'\", function () {",
				"    pm.expect(pm.response.json()).to.have.property(\"error\");",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 405: Petici\u00f3n dato especifico",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "POST",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2015,\"autonomous_community\":\"andalucia\",\"amount\":12604168,\"benefited_population\":25208,\"project_count\":45}",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 405\", function () {\n    pm.response.to.have.status(405);\n});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 409: Dato repetido",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "POST",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2015,\"autonomous_community\":\"andalucia\",\"amount\":12604168,\"benefited_population\":25208,\"project_count\":45}",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 409\", function () {\n    pm.response.to.have.status(409);\n});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Cambio de dato por fecha y comunidad",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2015,\"autonomous_community\":\"andalucia\",\"amount\":123456789,\"benefited_population\":25208,\"project_count\":45}\r\n",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 400: Datos originales",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "\r\n",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error' si es JSON\", function () {",
				"    try {",
				"        const res = pm.response.json();",
				"        pm.expect(res).to.have.property(\"error\");",
				"    } catch (e) {",
				"        console.warn(\"La respuesta no es JSON. Test omitido.\");",
				"    }",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 404: Dato inexistente",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2015,\"autonomous_community\":\"andalucia\",\"amount\":12604168,\"benefited_population\":25208,\"project_count\":45}\r\n",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/salteras",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "salteras"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error' si es JSON\", function () {",
				"    try {",
				"        const res = pm.response.json();",
				"        pm.expect(res).to.have.property(\"error\");",
				"    } catch (e) {",
				"        console.warn(\"La respuesta no es JSON. Test omitido.\");",
				"    }",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 405: Dato entero",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2015,\"autonomous_community\":\"andalucia\",\"amount\":12604168,\"benefited_population\":25208,\"project_count\":45}",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  ""
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 405\", function () {\n    pm.response.to.have.status(405);\n});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 409: Fallo por dato existente, datos originales",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2016,\"autonomous_community\":\"aragon\",\"amount\":12646637,\"benefited_population\":157577,\"project_count\":50}\r\n",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 409\", function () {\n    pm.response.to.have.status(409);\n});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 409: Fallo por dato existente, datos originales Copy",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "PUT",
		  "header": [],
		  "body": {
			"mode": "raw",
			"raw": "{\"year\": 2016,\"autonomous_community\":\"aragon\",\"amount\":12646637,\"benefited_population\":157577,\"project_count\":50}\r\n",
			"options": {
			  "raw": {
				"language": "json"
			  }
			}
		  },
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 409\", function () {\n    pm.response.to.have.status(409);\n});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Borrar datos",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "DELETE",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 Status code is 200\", function () {",
				"    pm.response.to.have.status(200);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Borrar dato concreto en fecha y comunidad",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "DELETE",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2015/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2015",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 C\u00f3digo de estado es uno de [200, 404]\", function () {",
				"    pm.expect([200, 404]).to.include(pm.response.code);",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 400: Borrar datos con fecha y coumidad",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "DELETE",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/hola/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "hola",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error'\", function () {",
				"    pm.expect(pm.response.json()).to.have.property(\"error\");",
				"});"
			  ]
			}
		  }
		]
	  },
	  {
		"name": "Error 404: Borrar dato concreto en fecha y comunidad, datos originales",
		"request": {
		  "auth": {
			"type": "noauth"
		  },
		  "method": "DELETE",
		  "header": [],
		  "url": {
			"raw": "{{Base_URL}}/api/v1/water-supply-improvements/2014/andalucia",
			"host": [
			  "{{Base_URL}}"
			],
			"path": [
			  "api",
			  "v1",
			  "water-supply-improvements",
			  "2014",
			  "andalucia"
			]
		  }
		},
		"response": [],
		"event": [
		  {
			"listen": "test",
			"script": {
			  "type": "text/javascript",
			  "exec": [
				"pm.test(\"\u2714 La respuesta tiene propiedad 'error'\", function () {",
				"    pm.expect(pm.response.json()).to.have.property(\"error\");",
				"});"
			  ]
			}
		  }
		]
	  }
	]
  }